"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1258],{48378:function(e,t,r){r.r(t),r.d(t,{default:function(){return Video_public}});var n=r(52322),o=r(2784),i=r(32893),a=r(56675),u=r(62182),useMediaFromCache=function(e){var t=(0,a.x)(),r=t.cache.identify({id:e,__typename:"Media"});return t.cache.readFragment({fragment:u.k,id:r})},l=r(51877),c=r(4326),d=r(77944),f=r(3440),s=r(27373),y=(0,s.z)("div")({name:"VideoWrapper",class:"v1mq3cdl",propsAsIs:!1}),p=(0,s.z)("video")({name:"StyledVideo",class:"s190vvts",propsAsIs:!1}),v=(0,s.z)("img")({name:"Poster",class:"p1821f1f",propsAsIs:!1}),m=r(80616);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var useLazyVideoLoading=function(e,t){var r,n=function(e){if(Array.isArray(e))return e}(r=(0,o.useState)(!1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(r,2)||function(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],a=n[1],u=(0,o.useCallback)(function(e){var t=e[0];t.isIntersecting&&t.target.dataset.src&&(t.target.src=t.target.dataset.src,t.target.removeAttribute("data-src"),t.target.load(),a(!0))},[]);return(0,o.useEffect)(function(){var r=e.current;if("IntersectionObserver"in window){var n=new IntersectionObserver(u,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_typeof(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_typeof(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({rootMargin:"300px"},t));if(r)return n.observe(r),function(){n.unobserve(r)}}},[]),{isVisible:i}},b=r(14136);function Video_view_typeof(e){return(Video_view_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=["showCustomPlayButton","showControls","autoplay","mute","media","loop","startTime","layoutMode","children","video","onClick","showPoster","fetchPriority"];function Video_view_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Video_view_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Video_view_arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Video_view_arrayLikeToArray(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Video_view_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Video_view=function(e){var t,r,l=e.showCustomPlayButton,s=e.showControls,h=e.autoplay,w=e.mute,O=e.media,_=e.loop,P=e.startTime,j=e.layoutMode,S=e.children,k=e.video,T=e.onClick,A=e.showPoster,V=e.fetchPriority,I=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,g),M=(0,i.W)().translations,C=Video_view_slicedToArray((0,o.useState)(!1),2),B=C[0],E=C[1],x=Video_view_slicedToArray((0,o.useState)(!1),2),L=x[0],z=x[1],D=(0,o.useRef)(!1),F=(0,a.x)(),W=(0,d.Z)(),K=W.getMediaPath,N=W.getMedia,R=K(m.BT.MediaVideo),U=K(m.BT.MediaVideoThumb),$=K(m.BT.MediaImage),Z=N(null==k?void 0:k.poster.mediaId),q=K(m.BT.BlockImage,{id:(null===(t=I.params)||void 0===t?void 0:t.destinationId)||"",mediaType:m.BT.BlockImage}),G=K(m.BT.BlockVideo,{id:(null===(r=I.params)||void 0===r?void 0:r.destinationId)||"",mediaType:m.BT.BlockVideo}),H=(0,o.useMemo)(function(){if(null!=k&&k.poster.mediaId){var e=F.readFragment({id:F.cache.identify({__typename:"Media",id:null==k?void 0:k.poster.mediaId}),fragment:u.k});return"".concat($).concat((null==e?void 0:e.webPFilename)||k.poster.value)}return null!=k&&k.defaultWebPPoster?"".concat(U).concat(k.defaultWebPPoster):null!=k&&k.defaultPoster?"".concat(U).concat(k.defaultPoster):O?"".concat($).concat(O.webPThumbnail||O.thumbnail||k.poster.value):"".concat(q).concat(null==k?void 0:k.poster.value)},[O,$,k.defaultPoster,k.defaultWebPPoster,k.poster.mediaId,k.poster.value,U,q]),J=(0,o.useRef)(null),Q=(0,o.useRef)(!1),X=(0,b.n)([c.bn.editor,c.bn.admin]),Y=useLazyVideoLoading(J).isVisible;(0,o.useEffect)(function(){null!=J&&J.current&&(J.current.currentTime=P)},[P]),(0,o.useEffect)(function(){if(!X&&Y&&h){if(!1===Q.current){var e;null===(e=J.current)||void 0===e||e.play(),Q.current=!0}L||z(!0)}},[Y,h,L,X]),(0,o.useEffect)(function(){J.current&&(w?J.current.setAttribute("muted",""):J.current.removeAttribute("muted"))},[w]);var handlePlayButtonClick=function(){!X&&null!=J&&J.current&&J.current.play()};return(0,n.jsxs)(y,{onClick:T,children:[(0,n.jsx)(p,{preload:"none","data-testid":"video",ref:J,"data-src":"".concat(R).concat((null==O?void 0:O.filename)||k.value),autoPlay:j!==c.bn.editor&&h&&Y,controls:s,muted:w,loop:_,playsInline:!0,onPlaying:function(){L||z(!0),E(!0)},onError:function(e){var t=e.currentTarget;D.current||(t.src="".concat(G,"/").concat(null==O?void 0:O.filename)),D.current=!0},onEnded:function(){return E(!1)},onPause:function(){return E(!1)}}),A&&!L&&(0,n.jsx)(v,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Video_view_ownKeys(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=Video_view_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Video_view_typeof(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Video_view_typeof(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Video_view_ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({"data-testid":"poster",alt:(null==Z?void 0:Z.alt)||(null==M?void 0:M["video.posterAlt"]),src:H,onClick:handlePlayButtonClick,fetchPriority:V},!V&&{loading:"lazy"})),h?null:l&&!B&&(0,n.jsx)(f.$1,{value:[{type:m.hg.Button,key:"onClick",value:handlePlayButtonClick}],children:S})]})},Video_public=function(e){let{appendSystemProps:t,video:r,params:o,loadType:a,fetchPriority:u,...c}=e,d=(null==r?void 0:r.mediaId)||"",{media:f}=(0,i.W)(),s=useMediaFromCache(d),y=(null==f?void 0:f[d])||s;return(null==r?void 0:r.value)&&(y||r.source||o.destinationId)?(0,n.jsx)("div",{...t(),children:(0,n.jsx)(Video_view,{...c,media:y,video:r,...a===l.z.preload&&{fetchPriority:u}})}):null}},77944:function(e,t,r){r.d(t,{Z:function(){return hooks_useMedia}});var n=r(56675),o=r(62182),i=r(73235),a=r(89130);function _templateObject(){let e=(0,i._)(["\n  fragment SettingFragment on Setting {\n    name\n    value\n  }\n"]);return _templateObject=function(){return e},e}let u=(0,a.Ps)(_templateObject());var l=r(32893),hooks_useMedia=function(){var e=(0,n.x)(),t=(0,l.W)(),r=t.media,i=t.settings;return{getMedia:function(t){return t?(null==r?void 0:r[t])||e.readFragment({id:e.cache.identify({id:t,__typename:"Media"}),fragment:o.k}):null},getMediaPath:function(t,r){var n,o=(null==i?void 0:i[(null==r?void 0:r.mediaType)||t])||(null===(n=e.readFragment({id:"Setting:".concat((null==r?void 0:r.mediaType)||t),fragment:u}))||void 0===n?void 0:n.value),a=o?"".concat(o,"/").replace(/\\/g,"/"):"";return r?a.replace("0",r.id):a}}}},14136:function(e,t,r){r.d(t,{n:function(){return isInNeededMode}});var n=r(53761),pageMode=function(){var e;return(null===(e=window.UCraft)||void 0===e?void 0:e.layoutMode)||n.bn.design},isInNeededMode=function(e){return e.includes(pageMode())}},51877:function(e,t,r){r.d(t,{z:function(){return o}});var n,o=((n={}).lazyLoad="lazyLoad",n.preload="preload",n)}}]);