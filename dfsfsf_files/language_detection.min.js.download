(()=>{let e={DetectionMode:{Default:"DEFAULT",Browser:"BROWSER",Ip:"IP",IpAndBrowser:"IP_BROWSER"},CookieNames:{CartId:"cartId",ManuallySelectedLanguage:"manuallyAppliedLanguageCode",RedirectedLanguage:"redirectedLanguage"},RedirectionResult:{None:0,Occurred:1,NotRequired:2}};function t(e,t){let r=e,n=new URL(e).pathname,i=new URL(t).pathname;return["my-account","checkout"].forEach(a=>{if(n.includes(a)&&i.includes(a)){let[o]=e.split(`/${a}`),c=t.split(`/${a}`)[1];r=`${o}/${a}${c}`}}),r}class r{constructor(e){this.languages=e,this.currentLanguage=e?.find(e=>e.current),this.preventFurtherRedirection=!1}redirectIfNeeded(r){if(!r||!r.published)return;if(this.setCookie(e.CookieNames.ManuallySelectedLanguage,r.code,1),r.code===this.currentLanguage?.code)return e.RedirectionResult.NotRequired;let n=new URL(t(r.hreflang,window.location.href));return window.location.search&&(n.search=window.location.search),r.domainId!==this.currentLanguage?.domainId&&n.searchParams.set("lang",r.code),window.location.assign(n),e.RedirectionResult.Occurred}redirectByCode(e){let t=this.languages.find(t=>t.code===e);return this.redirectIfNeeded(t)}redirectByBrowserLanguages(){let e=navigator.languages;for(let t of e){let r=2===t.length?"slug":t.length>4?"code":null,n=r?this.languages?.find(e=>e[r]===t):null;if(n)return this.redirectIfNeeded(n)}}redirectByCountry(e){let t=this.languages.find(t=>t.code.includes(e));return this.redirectIfNeeded(t)}redirectByCountryAndBrowserLanguages(t){let r=this.redirectByCountry(t);return r===e.RedirectionResult.Occurred?r:this.redirectByBrowserLanguages()}setCookie(e,t,r){let n="";if(r){let i=new Date;i.setTime(i.getTime()+864e5*r),n=`; expires=${i.toUTCString()}`}document.cookie=`${e}=${t||""}${n}; path=/`}deleteCookie(e){document.cookie=e+"=; Max-Age=-99999999;"}getCookie(e){let t=document.cookie.split("; ").find(t=>t.startsWith(`${e}=`));return t?t.split("=")[1]:null}}function n(){let t=window.languageDetectionMode,n=window.allLanguageInfo;if(!n)return;let i=new r(n),a=new URLSearchParams(window.location.search),o=a.get("mode");if("preview"===o)return;let c=a.get("lang"),d=i.getCookie(e.CookieNames.ManuallySelectedLanguage),l=i.getCookie("x_country_code");if(c){let s=window.location.href,u=new URL(s);u.searchParams.delete("lang"),history.replaceState({},"",u);let g=n.find(e=>e.slug===c||e.code===c);if(g){i.redirectIfNeeded(g);return}}if(d){let h=n.find(e=>e.slug===d||e.code===d);h?i.redirectIfNeeded(h):i.deleteCookie(e.CookieNames.ManuallySelectedLanguage);return}switch(t){case e.DetectionMode.Browser:i.redirectByBrowserLanguages();break;case e.DetectionMode.Ip:i.redirectByCountry(l);break;case e.DetectionMode.IpAndBrowser:i.redirectByCountryAndBrowserLanguages(l)}}function i(){let e=window.location.pathname,t=window.location.search;e.endsWith("/search")&&!t.trim()&&(window.location.href="/")}n(),i()})();